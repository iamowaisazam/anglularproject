import{b as T}from"./chunk-WBYAST3X.js";import{a as W,b as N,c as A,d as P,e as F,f as k,g as B,h as L}from"./chunk-V4YEOMC7.js";import{Aa as M,Ca as v,Ia as i,Ja as t,Ka as b,La as w,Ma as f,Na as E,Oa as a,Qa as p,Ra as _,Sa as g,U as S,Ua as I,aa as c,ba as s,jb as V,kb as x,pa as d,qa as C}from"./chunk-K2H44FGH.js";function R(y,h){if(y&1){let u=w();i(0,"tr")(1,"td"),b(2,"input",52),i(3,"input",53),f("change",function(r){let e=c(u).$implicit,o=E();return s(o.onUpdate("product",e.id,r))}),t()(),i(4,"td")(5,"input",54),f("change",function(r){let e=c(u).$implicit,o=E();return s(o.onUpdate("quantity",e.id,r))}),t()(),i(6,"td")(7,"input",55),f("change",function(r){let e=c(u).$implicit,o=E();return s(o.onUpdate("price",e.id,r))}),t()(),i(8,"td"),b(9,"input",56),t(),i(10,"td")(11,"button",57),f("click",function(){let r=c(u).$implicit,e=E();return s(e.removeItem(r.id))}),a(12,"Remove"),t()()()}if(y&2){let u=h.$implicit;d(2),v("value",u.id),d(),v("value",u.product),d(2),v("value",u.quantity),d(2),v("value",u.price),d(2),v("value",u.total)}}var G=(()=>{let h=class h{constructor(m){this.route=m,this.invoice_items=[],this.invoice={id:"",ref_number:"",invoice_date:"",status:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",subtotal:0,tax:0,taxAmount:0,grandtotal:0,invoice_items:[]},this.loadInvoice()}loadInvoice(){let m=this.route.snapshot.paramMap.get("id"),r=localStorage.getItem("invoices");if(r){let o=JSON.parse(r).find(l=>l.id===m);o&&(this.invoice=o,this.invoice_items=o.invoice_items||[])}}onUpdate(m,r,e){let o=e.target.value,l=this.invoice_items.find(n=>n.id===r);if(l){l[m]=o;let n=Number(l.quantity)||0,D=Number(l.price)||0;l.total=n*D}}addItem(){this.invoice_items.push({id:this.generateRandomId(),product:"",quantity:"",price:"",total:""}),this.calculate()}removeItem(m){this.invoice_items=this.invoice_items.filter(r=>r.id!==m)}calculate(){this.invoice.subtotal=0,this.invoice_items.forEach(m=>{this.invoice.subtotal+=Number(m.total)}),this.invoice.taxAmount=this.invoice.subtotal*Number(this.invoice.tax)/100,this.invoice.grandtotal=this.invoice.subtotal+this.invoice.taxAmount}generateRandomId(){return"_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36)}generateInvoice(){this.invoice.invoice_items=this.invoice_items;let m=localStorage.getItem("invoices"),r=[];if(m&&(r=JSON.parse(m)),!r)return!1;let e=[];for(let o=0;o<r.length;o++)if(r[o].id==this.invoice.id){debugger;e.push(this.invoice)}else e.push(r[o]);localStorage.setItem("invoices",JSON.stringify(e)),alert("Invoice Updated"),this.loadInvoice()}};h.\u0275fac=function(r){return new(r||h)(C(T))},h.\u0275cmp=S({type:h,selectors:[["app-invoice-edit"]],standalone:!0,features:[I],decls:109,vars:12,consts:[["myForm",""],[1,"container-fluid"],[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header","bg-info"],[1,"col-md-6","align-self-center"],[1,"mb-0","text-white"],[1,"col-md-6","text-end"],["type","submit",1,"generate_invoice","btn","btn-success",3,"click"],[1,"card-body","p-0"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-3"],[1,"form-group"],["for","invoiceNumber",1,"form-label"],["name","ref_number","placeholder","reference Number",1,"form-control",3,"ngModelChange","ngModel"],["for","invoiceDate",1,"form-label"],["placeholder","Invoice Date","type","date","name","invoice_date",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["placeholder","Status","name","status",1,"form-control",3,"ngModelChange","ngModel"],["for","customer_name",1,"form-label"],["type","text","name","customer_name","placeholder","Customer Name",1,"form-control",3,"ngModelChange","ngModel"],["for","customer_phone",1,"form-label"],["name","customer_phone","placeholder","Customer Phone",1,"form-control",3,"ngModelChange","ngModel"],["for","clientEmail",1,"form-label"],["type","email","name","customer_email","placeholder","Customer Email",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["for","customer_address","name","customer_address",1,"form-label"],["name","customer_address",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-plus"],[1,"mt-2","mb-3"],[1,"table-responsive"],["id","invoiceItems",1,"table","table-bordered"],[4,"ngFor","ngForOf"],["for","subTotal",1,"form-label"],["type","number","readonly","",1,"form-control",3,"value"],["for","taxRate",1,"form-label"],["name","tax","type","number",1,"form-control",3,"ngModelChange","change","ngModel"],["for","taxAmount",1,"form-label"],["readonly","",1,"form-control",3,"value"],["for","totalAmount",1,"form-label"],["type","hidden",3,"value"],["placeholder","Item",1,"form-control",3,"change","value"],["placeholder","Quantity",1,"form-control",3,"change","value"],["placeholder","Unit Price",1,"form-control",3,"change","value"],["placeholder","Total","readonly","",1,"form-control",3,"value"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,e){if(r&1){let o=w();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),a(4,"Edit Invoices "),t()(),i(5,"div",5)(6,"div",6)(7,"ol",7)(8,"li",8)(9,"a",9),a(10,"Home"),t()(),i(11,"li",10),a(12,"Invoices"),t()()()()(),i(13,"div",11)(14,"div",12)(15,"div",13)(16,"header",14)(17,"div",11)(18,"div",15)(19,"h4",16),a(20,"Edit Form"),t()(),i(21,"div",17)(22,"button",18),f("click",function(){return c(o),s(e.generateInvoice())}),a(23,"Update Invoice"),t()()()(),i(24,"div",19)(25,"div",20)(26,"form",null,0)(28,"div",21)(29,"div",22)(30,"div",23)(31,"label",24),a(32,"Ref Number"),t(),i(33,"input",25),g("ngModelChange",function(n){return c(o),_(e.invoice.ref_number,n)||(e.invoice.ref_number=n),s(n)}),t()()(),i(34,"div",22)(35,"div",23)(36,"label",26),a(37," Invoice Date"),t(),i(38,"input",27),g("ngModelChange",function(n){return c(o),_(e.invoice.invoice_date,n)||(e.invoice.invoice_date=n),s(n)}),t()()(),i(39,"div",22)(40,"div",23)(41,"label",28),a(42,"Status"),t(),i(43,"input",29),g("ngModelChange",function(n){return c(o),_(e.invoice.status,n)||(e.invoice.status=n),s(n)}),t()()(),i(44,"div",22)(45,"div",23)(46,"label",30),a(47,"Customer Name"),t(),i(48,"input",31),g("ngModelChange",function(n){return c(o),_(e.invoice.customer_name,n)||(e.invoice.customer_name=n),s(n)}),t()()(),i(49,"div",22)(50,"div",23)(51,"label",32),a(52,"Customer Phone"),t(),i(53,"input",33),g("ngModelChange",function(n){return c(o),_(e.invoice.customer_phone,n)||(e.invoice.customer_phone=n),s(n)}),t()()(),i(54,"div",22)(55,"div",23)(56,"label",34),a(57,"Customer Email"),t(),i(58,"input",35),g("ngModelChange",function(n){return c(o),_(e.invoice.customer_email,n)||(e.invoice.customer_email=n),s(n)}),t()()(),i(59,"div",36)(60,"div",23)(61,"label",37),a(62,"Customer Address"),t(),i(63,"input",38),g("ngModelChange",function(n){return c(o),_(e.invoice.customer_address,n)||(e.invoice.customer_address=n),s(n)}),t()()()(),i(64,"div",11)(65,"div",36)(66,"h5"),a(67,"Invoice Items"),t()(),i(68,"div",17)(69,"button",39),f("click",function(){return c(o),s(e.addItem())}),b(70,"i",40),t()()(),i(71,"div",41)(72,"div",42)(73,"table",43)(74,"thead")(75,"tr")(76,"th"),a(77,"Item Name"),t(),i(78,"th"),a(79,"Qty"),t(),i(80,"th"),a(81,"Price"),t(),i(82,"th"),a(83,"Total"),t(),i(84,"th"),a(85,"Action"),t()()(),i(86,"tbody"),M(87,R,13,5,"tr",44),t()()()(),i(88,"div",21)(89,"div",22)(90,"div",23)(91,"label",45),a(92,"Subtotal"),t(),b(93,"input",46),t()(),i(94,"div",22)(95,"div",23)(96,"label",47),a(97,"Tax Rate (%)"),t(),i(98,"input",48),g("ngModelChange",function(n){return c(o),_(e.invoice.tax,n)||(e.invoice.tax=n),s(n)}),f("change",function(){return c(o),s(e.calculate())}),t()()(),i(99,"div",22)(100,"div",23)(101,"label",49),a(102,"Tax Amount"),t(),b(103,"input",50),t()(),i(104,"div",22)(105,"div",23)(106,"label",51),a(107,"Total Amount"),t(),b(108,"input",50),t()()()()()()()()()()}r&2&&(d(33),p("ngModel",e.invoice.ref_number),d(5),p("ngModel",e.invoice.invoice_date),d(5),p("ngModel",e.invoice.status),d(5),p("ngModel",e.invoice.customer_name),d(5),p("ngModel",e.invoice.customer_phone),d(5),p("ngModel",e.invoice.customer_email),d(5),p("ngModel",e.invoice.customer_address),d(24),v("ngForOf",e.invoice_items),d(6),v("value",e.invoice.subtotal),d(5),p("ngModel",e.invoice.tax),d(5),v("value",e.invoice.taxAmount),d(5),v("value",e.invoice.grandtotal))},dependencies:[x,V,L,k,W,B,N,A,F,P]});let y=h;return y})();export{G as InvoiceEditComponent};
