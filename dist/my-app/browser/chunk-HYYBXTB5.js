import{a as x,b as W,c as T,d as N,e as A,f as P,g as F,h as k}from"./chunk-V4YEOMC7.js";import{Aa as M,Ca as v,Ia as i,Ja as t,Ka as b,La as w,Ma as f,Na as y,Oa as o,Qa as p,Ra as _,Sa as g,U as S,Ua as E,aa as d,ba as c,jb as I,kb as V,pa as l}from"./chunk-K2H44FGH.js";function L(C,h){if(C&1){let u=w();i(0,"tr")(1,"td"),b(2,"input",52),i(3,"input",53),f("change",function(r){let e=d(u).$implicit,a=y();return c(a.onUpdate("product",e.id,r))}),t()(),i(4,"td")(5,"input",54),f("change",function(r){let e=d(u).$implicit,a=y();return c(a.onUpdate("quantity",e.id,r))}),t()(),i(6,"td")(7,"input",55),f("change",function(r){let e=d(u).$implicit,a=y();return c(a.onUpdate("price",e.id,r))}),t()(),i(8,"td"),b(9,"input",56),t(),i(10,"td")(11,"button",57),f("click",function(){let r=d(u).$implicit,e=y();return c(e.removeItem(r.id))}),o(12,"Remove"),t()()()}if(C&2){let u=h.$implicit;l(2),v("value",u.id),l(),v("value",u.product),l(2),v("value",u.quantity),l(2),v("value",u.price),l(2),v("value",u.total)}}var j=(()=>{let h=class h{constructor(){this.invoice_items=[],this.invoice={id:"",ref_number:"",invoice_date:"",status:"",customer_name:"",customer_phone:"",customer_email:"",customer_address:"",subtotal:0,tax:0,taxAmount:0,grandtotal:0,invoice_items:[]}}onUpdate(s,r,e){let a=e.target.value,m=this.invoice_items.find(n=>n.id===r);if(m){m[s]=a;let n=Number(m.quantity)||0,B=Number(m.price)||0;m.total=n*B}}addItem(){this.invoice_items.push({id:this.generateRandomId(),product:"",quantity:"",price:"",total:""}),this.calculate()}removeItem(s){this.invoice_items=this.invoice_items.filter(r=>r.id!==s)}calculate(){this.invoice.subtotal=0,this.invoice_items.forEach(s=>{this.invoice.subtotal+=Number(s.total)}),this.invoice.taxAmount=this.invoice.subtotal*Number(this.invoice.tax)/100,this.invoice.grandtotal=this.invoice.subtotal+this.invoice.taxAmount}generateRandomId(){return"_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36)}generateInvoice(){this.invoice.invoice_items=this.invoice_items,this.invoice.id=this.generateRandomId();let s=localStorage.getItem("invoices"),r=[];s&&(r=JSON.parse(s)),r.push(this.invoice),localStorage.setItem("invoices",JSON.stringify(r)),alert("Invoice Created")}};h.\u0275fac=function(r){return new(r||h)},h.\u0275cmp=S({type:h,selectors:[["app-invoice-create"]],standalone:!0,features:[E],decls:109,vars:12,consts:[["myForm",""],[1,"container-fluid"],[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header","bg-info"],[1,"col-md-6","align-self-center"],[1,"mb-0","text-white"],[1,"col-md-6","text-end"],["type","submit",1,"generate_invoice","btn","btn-success",3,"click"],[1,"card-body","p-0"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-3"],[1,"form-group"],["for","invoiceNumber",1,"form-label"],["name","ref_number","placeholder","reference Number",1,"form-control",3,"ngModelChange","ngModel"],["for","invoiceDate",1,"form-label"],["placeholder","Invoice Date","type","date","name","invoice_date",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["placeholder","Status","name","status",1,"form-control",3,"ngModelChange","ngModel"],["for","customer_name",1,"form-label"],["type","text","name","customer_name","placeholder","Customer Name",1,"form-control",3,"ngModelChange","ngModel"],["for","customer_phone",1,"form-label"],["name","customer_phone","placeholder","Customer Phone",1,"form-control",3,"ngModelChange","ngModel"],["for","clientEmail",1,"form-label"],["type","email","name","customer_email","placeholder","Customer Email",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["for","customer_address","name","customer_address",1,"form-label"],["name","customer_address",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-plus"],[1,"mt-2","mb-3"],[1,"table-responsive"],["id","invoiceItems",1,"table","table-bordered"],[4,"ngFor","ngForOf"],["for","subTotal",1,"form-label"],["type","number","readonly","",1,"form-control",3,"value"],["for","taxRate",1,"form-label"],["name","tax","type","number",1,"form-control",3,"ngModelChange","change","ngModel"],["for","taxAmount",1,"form-label"],["readonly","",1,"form-control",3,"value"],["for","totalAmount",1,"form-label"],["type","hidden",3,"value"],["placeholder","Item",1,"form-control",3,"change","value"],["placeholder","Quantity",1,"form-control",3,"change","value"],["placeholder","Unit Price",1,"form-control",3,"change","value"],["placeholder","Total","readonly","",1,"form-control",3,"value"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(r,e){if(r&1){let a=w();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),o(4,"Add New Invoices "),t()(),i(5,"div",5)(6,"div",6)(7,"ol",7)(8,"li",8)(9,"a",9),o(10,"Home"),t()(),i(11,"li",10),o(12,"Invoices"),t()()()()(),i(13,"div",11)(14,"div",12)(15,"div",13)(16,"header",14)(17,"div",11)(18,"div",15)(19,"h4",16),o(20,"Add New Form"),t()(),i(21,"div",17)(22,"button",18),f("click",function(){return d(a),c(e.generateInvoice())}),o(23,"Generate Invoice"),t()()()(),i(24,"div",19)(25,"div",20)(26,"form",null,0)(28,"div",21)(29,"div",22)(30,"div",23)(31,"label",24),o(32,"Ref Number"),t(),i(33,"input",25),g("ngModelChange",function(n){return d(a),_(e.invoice.ref_number,n)||(e.invoice.ref_number=n),c(n)}),t()()(),i(34,"div",22)(35,"div",23)(36,"label",26),o(37," Invoice Date"),t(),i(38,"input",27),g("ngModelChange",function(n){return d(a),_(e.invoice.invoice_date,n)||(e.invoice.invoice_date=n),c(n)}),t()()(),i(39,"div",22)(40,"div",23)(41,"label",28),o(42,"Status"),t(),i(43,"input",29),g("ngModelChange",function(n){return d(a),_(e.invoice.status,n)||(e.invoice.status=n),c(n)}),t()()(),i(44,"div",22)(45,"div",23)(46,"label",30),o(47,"Customer Name"),t(),i(48,"input",31),g("ngModelChange",function(n){return d(a),_(e.invoice.customer_name,n)||(e.invoice.customer_name=n),c(n)}),t()()(),i(49,"div",22)(50,"div",23)(51,"label",32),o(52,"Customer Phone"),t(),i(53,"input",33),g("ngModelChange",function(n){return d(a),_(e.invoice.customer_phone,n)||(e.invoice.customer_phone=n),c(n)}),t()()(),i(54,"div",22)(55,"div",23)(56,"label",34),o(57,"Customer Email"),t(),i(58,"input",35),g("ngModelChange",function(n){return d(a),_(e.invoice.customer_email,n)||(e.invoice.customer_email=n),c(n)}),t()()(),i(59,"div",36)(60,"div",23)(61,"label",37),o(62,"Customer Address"),t(),i(63,"input",38),g("ngModelChange",function(n){return d(a),_(e.invoice.customer_address,n)||(e.invoice.customer_address=n),c(n)}),t()()()(),i(64,"div",11)(65,"div",36)(66,"h5"),o(67,"Invoice Items"),t()(),i(68,"div",17)(69,"button",39),f("click",function(){return d(a),c(e.addItem())}),b(70,"i",40),t()()(),i(71,"div",41)(72,"div",42)(73,"table",43)(74,"thead")(75,"tr")(76,"th"),o(77,"Item Name"),t(),i(78,"th"),o(79,"Qty"),t(),i(80,"th"),o(81,"Price"),t(),i(82,"th"),o(83,"Total"),t(),i(84,"th"),o(85,"Action"),t()()(),i(86,"tbody"),M(87,L,13,5,"tr",44),t()()()(),i(88,"div",21)(89,"div",22)(90,"div",23)(91,"label",45),o(92,"Subtotal"),t(),b(93,"input",46),t()(),i(94,"div",22)(95,"div",23)(96,"label",47),o(97,"Tax Rate (%)"),t(),i(98,"input",48),g("ngModelChange",function(n){return d(a),_(e.invoice.tax,n)||(e.invoice.tax=n),c(n)}),f("change",function(){return d(a),c(e.calculate())}),t()()(),i(99,"div",22)(100,"div",23)(101,"label",49),o(102,"Tax Amount"),t(),b(103,"input",50),t()(),i(104,"div",22)(105,"div",23)(106,"label",51),o(107,"Total Amount"),t(),b(108,"input",50),t()()()()()()()()()()}r&2&&(l(33),p("ngModel",e.invoice.ref_number),l(5),p("ngModel",e.invoice.invoice_date),l(5),p("ngModel",e.invoice.status),l(5),p("ngModel",e.invoice.customer_name),l(5),p("ngModel",e.invoice.customer_phone),l(5),p("ngModel",e.invoice.customer_email),l(5),p("ngModel",e.invoice.customer_address),l(24),v("ngForOf",e.invoice_items),l(6),v("value",e.invoice.subtotal),l(5),p("ngModel",e.invoice.tax),l(5),v("value",e.invoice.taxAmount),l(5),v("value",e.invoice.grandtotal))},dependencies:[k,P,x,F,W,T,A,N,V,I]});let C=h;return C})();export{j as InvoiceCreateComponent};
